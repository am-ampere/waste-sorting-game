<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏Å‡∏π‡πâ(KU)‡πÇ‡∏•‡∏Å</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    :root { --primary-green: #067957; }
    * { font-family: 'Prompt', sans-serif !important; box-sizing: border-box; }
    body { margin: 0; background: linear-gradient(135deg, #e9f7ef 0%, #b2d8c1 100%); color: var(--primary-green); height: 100vh; overflow: hidden; }
    .container { width: 100%; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 40px 25px 30px 25px; text-align: center; }
    .hidden { display: none !important; }
    img { max-width: 100%; height: auto !important; object-fit: contain; display: block; margin: 0 auto; background: transparent !important; image-rendering: -webkit-optimize-contrast; }
    
    .main-logo { width: 140px; margin-top: 10px; } 
    #start-page .main-logo { width: 260px; } 

    /* Loading Page 0.3s gimmick */
    #loading-page { 
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
      background: #e9f7ef; display: flex; flex-direction: column; 
      justify-content: center; align-items: center; z-index: 99; 
    }
    .loading-logo { width: 240px; margin-bottom: 40px; }
    .loader-icon { font-size: 2rem; animation: spin 2s linear infinite; margin-top: 10px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    .center-img { width: 110px; margin: 15px 0; } 
    .partner-logos { width: 220px; margin-bottom: 5px; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°: ‡∏Ç‡∏≤‡∏ß‡∏•‡πâ‡∏ß‡∏ô ‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß ‡πÑ‡∏£‡πâ‡∏Ç‡∏≠‡∏ö */
    .btn-start { 
      background: #ffffff; color: var(--primary-green); border: none; 
      width: 100%; max-width: 230px; 
      padding: 14px; border-radius: 50px; 
      font-size: 1.25rem; font-weight: 600; cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .choice-btn { width: 100%; max-width: 320px; background: #ffffff; border: none; padding: 16px; margin: 10px 0; border-radius: 50px; font-size: 1.1rem; color: var(--primary-green); font-weight: 500; box-shadow: 0 3px 10px rgba(0,0,0,0.06); }
    h1 { font-size: 1.7rem; font-weight: 700; margin: 5px 0; line-height: 1.2; }
    .score-big { font-size: 5.5rem; font-weight: 700; line-height: 1; margin: 0; }
  </style>
</head>
<body>

<div id="loading-page">
  <img src="https://i.postimg.cc/FHwJxdCD/1-Logo-yaek-KUlok.png" class="loading-logo">
  <div class="loader-icon">‚åõ</div>
  <p style="font-size: 1.1rem; font-weight: 500;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏•‡∏Å‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</p>
</div>

<div id="start-page" class="container hidden">
  <img src="https://i.postimg.cc/FHwJxdCD/1-Logo-yaek-KUlok.png" class="main-logo">
  <div>
    <h1 id="user-display" style="margin-bottom: 0;">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏Ñ‡∏∏‡∏ì‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h1>
    <p style="margin-top: 5px;">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡πÄ‡∏Å‡πà‡∏á‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô ‡∏°‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ô!</p>
    <button class="btn-start" onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°</button>
  </div>
  <img src="https://i.ibb.co/zWfz6wJJ/image.png" class="center-img">
  <div class="footer"><img src="https://i.postimg.cc/tJgTbpm4/2-th-ngth-kth.png" class="partner-logos"></div>
</div>

<div id="game-page" class="container hidden">
  <img src="https://i.postimg.cc/FHwJxdCD/1-Logo-yaek-KUlok.png" class="main-logo">
  <div style="flex-grow: 1; width: 100%; padding-top: 20px;">
    <h1 id="question-text"></h1>
    <div id="choices-container"></div>
    <div id="feedback-area" style="min-height: 110px; margin-top: 10px; visibility: hidden;">
      <div id="feedback-msg" style="font-weight: 700; font-size: 1.3rem;"></div>
      <div id="feedback-emoji" style="font-size: 3rem; margin-top: 5px;"></div>
    </div>
  </div>
  <div class="footer"><img src="https://i.postimg.cc/tJgTbpm4/2-th-ngth-kth.png" class="partner-logos"></div>
</div>

<div id="result-page" class="container hidden">
  <img src="https://i.postimg.cc/FHwJxdCD/1-Logo-yaek-KUlok.png" class="main-logo">
  <div style="margin-top: 20px;">
    <p id="final-score" class="score-big">0/4</p>
    <p id="result-user-name" style="font-weight: 600; font-size: 1.3rem; margin: 5px 0;"></p>
    <h1 id="result-title" style="margin: 5px 0;"></h1>
    <p id="result-desc" style="font-weight: 500; font-size: 1.1rem; margin: 0;"></p>
    <div id="result-emoji" style="font-size: 3rem; margin-top: 5px;"></div>
  </div>
  
  <div style="margin-top: auto; margin-bottom: 50px; line-height: 1.4;">
    <p style="font-weight: 700; font-size: 1.15rem; margin: 0;">üå± ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô üåç</p>
    <p style="font-size: 1rem; margin: 0;">‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
    <p style="font-size: 1rem; margin: 0;">‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏•‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏•‡∏¢‡∏•‡πà‡∏∞!</p>
  </div>
  
  <div class="footer"><img src="https://i.postimg.cc/tJgTbpm4/2-th-ngth-kth.png" class="partner-logos"></div>
</div>

<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz-5DvD7l-KbqG_X4IpI32FPrkQRtm6hQ-ZNc2s9MiAyiB118lMm280rJqce7r1-YYk/exec";
  let playerName = "‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô", currentStep = 0, score = 0, userAnswers = [];

  const questions = [
    { q: "‡∏Ç‡∏ß‡∏î‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å<br>‡∏Ñ‡∏ß‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏±‡∏á‡πÑ‡∏´‡∏ô?", options: ["‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•", "‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", "‡∏ñ‡∏±‡∏á‡∏ã‡∏±‡∏°‡∏à‡∏±‡πã‡∏á"], answer: 0, 
      feedbacks: { 0: { msg: "‡∏≠‡∏∑‡πâ‡∏≠‡∏´‡∏∑‡∏≠ ‡∏ô‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏°‡∏∑‡∏≠‡∏õ‡∏£‡∏≤‡∏ö‡∏Ç‡∏¢‡∏∞!", emoji: "üå±" }, 1: { msg: "‡∏ú‡∏¥‡∏î! ‡πÅ‡∏¢‡∏Å‡∏ú‡∏¥‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", emoji: "üòà" }, 2: { msg: "‡∏ú‡∏¥‡∏î! ‡πÑ‡∏õ‡∏ä‡∏°‡∏û‡∏π‡∏ó‡∏ß‡∏µ‡∏õ‡πÄ‡∏•‡∏¢‡πÑ‡∏õ‡πä", emoji: "üòà" } } },
    { q: "‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏î ‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠<br>‡∏ó‡∏¥‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏î‡∏µ?", options: ["‡∏ó‡∏¥‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏•‡∏¢", "‡πÅ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥/‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á ‡∏ó‡∏¥‡πâ‡∏á‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ñ‡∏±‡∏á", "‡∏Å‡∏¥‡∏ô‡πÅ‡∏Å‡πâ‡∏ß‡∏•‡∏á‡πÑ‡∏õ"], answer: 1, 
      feedbacks: { 0: { msg: "‡∏ú‡∏¥‡∏î! ‡πÄ‡∏ó‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢ ‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ß‡∏∏‡πâ‡∏¢", emoji: "üòà" }, 1: { msg: "‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡πÇ‡∏´‡∏î ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏Å‡∏£‡∏ò‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô", emoji: "üëç" }, 2: { msg: "‡∏ú‡∏¥‡∏î! ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÅ‡∏Å‡πâ‡∏ß‡∏ï‡∏¥‡∏î‡∏Ñ‡∏≠", emoji: "üòà" } } },
    { q: "‡πÑ‡∏°‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô<br>‡∏ó‡∏¥‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏î‡∏µ?", options: ["‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÜ", "‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á ‡∏ó‡∏∞‡∏•‡∏∏‡∏ñ‡∏∂‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à", "‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ñ‡∏±‡∏á‡πÑ‡∏°‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö"], answer: 2, 
      feedbacks: { 0: { msg: "‡∏ú‡∏¥‡∏î! ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏ô‡πä‡∏∞", emoji: "üòà" }, 1: { msg: "‡∏ú‡∏¥‡∏î! ‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ä‡πâ‡∏≤‡∏ô‡∏ô‡∏ô<br>‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏à‡∏±‡πä‡∏¢‡∏¢‡∏¢", emoji: "üòà" }, 2: { msg: "‡πÅ‡∏¢‡∏Å‡πÄ‡∏Å‡πà‡∏á‡∏à‡∏ô ‡∏Ç‡∏¢‡∏∞‡∏Ç‡∏ô‡∏•‡∏∏‡∏Å!", emoji: "üòç" } } },
    { q: "‡∏Ç‡∏¢‡∏∞‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£<br>‡∏ó‡∏¥‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏î‡∏µ?", options: ["‡πÄ‡∏ó‡πÉ‡∏™‡πà‡∏ñ‡πâ‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", "‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏î‡∏π‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤", "‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£"], answer: 2, 
      feedbacks: { 0: { msg: "‡πÄ‡∏≠‡πâ‡∏≤! ‡∏ó‡∏≥‡πÑ‡∏°‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏±‡πâ‡∏ô", emoji: "ü§î" }, 1: { msg: "‡∏ú‡∏¥‡∏î! ‡∏î‡∏π‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô‡πÄ‡∏Å‡πà‡∏≤<br>‡∏¢‡∏±‡∏á‡πÄ‡∏®‡∏£‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏´‡∏£‡∏≠", emoji: "ü§î" }, 2: { msg: "‡∏™‡∏Å‡∏¥‡∏•‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞ ‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏Æ‡πà‡∏á!", emoji: "üôå" } } }
  ];

  const results = {
    0: { title: "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠!", desc: "‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ô‡∏≠‡∏ô‡∏ô‡πâ‡∏≠‡∏¢ ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ô‡∏≠‡∏¢‡πÅ‡∏ó‡∏ô", emoji: "üòî" },
    1: { title: "‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏•‡∏∞!", desc: "‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡∏∞ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏•‡∏Å‡πÄ‡∏£‡∏≤", emoji: "üôã‚Äç‚ôÄÔ∏è" },
    2: { title: "‡∏™‡∏π‡πâ‡πÄ‡∏Ç‡∏≤!", desc: "‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πä‡∏∞‡πÅ‡∏•‡πâ‡∏ß", emoji: "üòî" },
    3: { title: "‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á!", desc: "‡πÅ‡∏¢‡∏Å‡πÄ‡∏Å‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡πÄ‡∏ô‡∏µ‡πà‡∏¢!", emoji: "üòò" },
    4: { title: "‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!", desc: "‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ ‡∏û‡∏µ‡πà‡∏ã‡∏≤‡πÄ‡∏•‡πâ‡∏á‡∏°‡∏µ‡∏´‡∏ô‡∏≤‡∏ß", emoji: "üòç" }
  };

  async function initLIFF() {
    try {
      await liff.init({ liffId: "2008938028-gCqozVV5" });
      if (liff.isLoggedIn()) {
        const profile = await liff.getProfile();
        playerName = profile.displayName;
        document.getElementById('user-display').innerHTML = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏Ñ‡∏∏‡∏ì " + playerName;
      }
    } catch(e) {}
    // Loading ‡πÅ‡∏ß‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß 0.3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á
    setTimeout(() => {
      document.getElementById('loading-page').classList.add('hidden');
      document.getElementById('start-page').classList.remove('hidden');
    }, 300);
  }

  function startGame() { document.getElementById('start-page').classList.add('hidden'); document.getElementById('game-page').classList.remove('hidden'); showQuestion(); }

  function showQuestion() {
    const data = questions[currentStep];
    document.getElementById('question-text').innerHTML = data.q;
    const container = document.getElementById('choices-container');
    container.innerHTML = "";
    document.getElementById('feedback-area').style.visibility = "hidden";
    data.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = 'choice-btn';
      btn.innerText = opt;
      btn.onclick = () => checkAnswer(i);
      container.appendChild(btn);
    });
  }

  function checkAnswer(idx) {
    const data = questions[currentStep];
    const isCorrect = (idx === data.answer);
    const feedback = data.feedbacks[idx];
    userAnswers.push(data.options[idx]);
    if(isCorrect) score++;
    const msgEl = document.getElementById('feedback-msg');
    msgEl.innerHTML = feedback.msg;
    msgEl.style.color = isCorrect ? "var(--primary-green)" : "#b52424";
    document.getElementById('feedback-emoji').innerText = feedback.emoji;
    document.getElementById('feedback-area').style.visibility = "visible";
    document.querySelectorAll('.choice-btn').forEach(b => b.disabled = true);
    
    setTimeout(() => {
      currentStep++;
      if(currentStep < questions.length) showQuestion();
      else finishGame();
    }, 2000);
  }

  function finishGame() {
    document.getElementById('game-page').classList.add('hidden');
    document.getElementById('result-page').classList.remove('hidden');
    const res = results[score];
    document.getElementById('final-score').innerText = score + "/4";
    document.getElementById('result-user-name').innerText = "‡∏Ñ‡∏∏‡∏ì " + playerName;
    document.getElementById('result-title').innerText = res.title;
    document.getElementById('result-desc').innerText = res.desc;
    document.getElementById('result-emoji').innerText = res.emoji;
    saveToSheet();
  }

  function saveToSheet() {
    const payload = { Name: playerName, Score: score, Q1_Answer: userAnswers[0] || "", Q2_Answer: userAnswers[1] || "", Q3_Answer: userAnswers[2] || "", Q4_Answer: userAnswers[3] || "" };
    fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) }).catch(e => {});
  }

  window.onload = initLIFF;
</script>
</body>
</html>
