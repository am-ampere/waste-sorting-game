<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å - Advance BIO</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
    body { 
      margin: 0; 
      font-family: 'Prompt', sans-serif; 
      background: linear-gradient(135deg, #e9f7ef 0%, #b2d8c1 100%); 
      color: #1e5c3a; 
      overflow-x: hidden;
      font-size: 18px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô */
    }

    .container { 
      min-height: 100vh; 
      padding: 25px; 
      display: flex; 
      flex-direction: column; 
      justify-content: center; 
      align-items: center; 
      text-align: center;
      position: relative; 
      box-sizing: border-box;
      padding-bottom: 140px; 
    }

    .hidden { display: none !important; }

    .title-emoji { font-size: 4rem; margin-bottom: 15px; }
    .title-text { font-size: 2.2rem; line-height: 1.3; margin-bottom: 35px; font-weight: 700; }

    .btn { 
      width: 100%; 
      max-width: 350px; 
      padding: 18px 25px; 
      margin: 12px 0; 
      border-radius: 50px; 
      border: 2px solid transparent; 
      background: #ffffff; 
      cursor: pointer; 
      font-size: 1.3rem; /* ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
      font-weight: 600;
      color: #2e7d32;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
      transition: all 0.3s ease;
    }

    .btn:hover:not(:disabled) { transform: translateY(-3px); background: #f1f8e9; }
    .btn.correct { background: #43a047 !important; color: #fff; }
    .btn.wrong { background: #e53935 !important; color: #fff; }
    .btn:disabled { cursor: not-allowed; opacity: 0.8; }

    .question { 
      font-size: 1.6rem; /* ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
      margin-bottom: 30px; 
      background: rgba(255,255,255,0.6);
      padding: 25px;
      border-radius: 25px;
      width: 100%;
      max-width: 400px;
      box-sizing: border-box;
      font-weight: bold;
    }

    .message { margin-top: 25px; font-size: 1.3rem; font-weight: bold; min-height: 50px; }

    .logo-footer { 
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      max-width: 180px; /* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
      opacity: 1;
    }

    #finalScoreDisplay { font-size: 1.8rem; margin: 25px 0; font-weight: bold; }
    .thank-you-msg { font-size: 1.4rem; margin-bottom: 20px; }
  </style>
</head>
<body>

<div id="loading" class="container">
  <div class="title-emoji">‚åõ</div>
  <p style="font-size: 1.5rem;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°...</p>
  <img class="logo-footer" src="https://www.advancebio11.com/wp-content/uploads/2025/07/New-Advance-BIO_s-logo-430x121_result.webp" alt="Logo">
</div>

<div id="start" class="container hidden">
  <div class="title-emoji">üóëÔ∏è‚ôªÔ∏è</div>
  <div class="title-text">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì <span id="display-name"></span><br>‡∏Ç‡∏¢‡∏∞‡∏ô‡∏µ‡πâ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏±‡∏á‡πÑ‡∏´‡∏ô?</div>
  <button class="btn" onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô üåç</button>
  <img class="logo-footer" src="https://www.advancebio11.com/wp-content/uploads/2025/07/New-Advance-BIO_s-logo-430x121_result.webp" alt="Logo">
</div>

<div id="game" class="container hidden">
  <div id="question" class="question"></div>
  <div id="choices"></div>
  <div id="message" class="message"></div>
  <img class="logo-footer" src="https://www.advancebio11.com/wp-content/uploads/2025/07/New-Advance-BIO_s-logo-430x121_result.webp" alt="Logo">
</div>

<div id="end" class="container hidden">
  <div class="title-emoji">ü•≥</div>
  <h1 style="font-size: 2.5rem;">‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!</h1>
  <p id="finalScoreDisplay"></p>
  <p class="thank-you-msg">‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞ = 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÇ‡∏•‡∏Å üåçüíö</p>
  <img class="logo-footer" src="https://www.advancebio11.com/wp-content/uploads/2025/07/New-Advance-BIO_s-logo-430x121_result.webp" alt="Logo">
</div>

<script>
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ID ‡πÅ‡∏•‡∏∞ URL ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
  const MY_LIFF_ID = "2008938028-gCqozVV5"; 
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzeoyz1cTR4lW4NE-HkUYLia2J2Xw9TFfIUp7j-8tmEQTrKIjSP1P9FaFVXecuZr7Ux/exec"; 

  const questions = [
    { text: "üß¥ ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏Ñ‡∏ß‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏±‡∏á‡πÑ‡∏´‡∏ô?", choices: ["‚ôªÔ∏è ‡∏ñ‡∏±‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•", "üîµ ‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", "üçÉ ‡∏ñ‡∏±‡∏á‡∏ã‡∏±‡∏°‡∏à‡∏±‡πã‡∏á"], answer: 0 },
    { text: "üç° ‡πÑ‡∏°‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏¥‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á?", choices: ["üîµ ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÜ", "üî¥ ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∞‡∏•‡∏∏‡∏´‡∏±‡∏ß‡πÉ‡∏à", "üü§ ‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ñ‡∏±‡∏á‡πÑ‡∏°‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏ö"], answer: 2 },
    { text: "ü•§ ‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏î‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á?", choices: ["üöÆ ‡∏ó‡∏¥‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏•‡∏¢", "üßä ‡πÅ‡∏¢‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏ß", "üçÉ ‡∏Å‡∏¥‡∏ô‡πÅ‡∏Å‡πâ‡∏ß‡∏•‡∏á‡πÑ‡∏õ"], answer: 1 },
    { text: "ü•ï ‡∏Ç‡∏¢‡∏∞‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏¥‡πâ‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏á?", choices: ["üü° ‡πÄ‡∏ó‡πÉ‡∏™‡πà‡∏ñ‡πâ‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", "üü§ ‡πÄ‡∏Ç‡∏ß‡∏µ‡πâ‡∏¢‡∏á‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô", "üü¢ ‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£"], answer: 2 }
  ];

  let playerName = "";
  let userResponses = [];
  let score = 0;
  let current = 0;

  async function initializeLiff() {
    try {
      console.log("Starting LIFF...");
      await liff.init({ liffId: MY_LIFF_ID });
      if (!liff.isLoggedIn()) {
        console.log("Not logged in, redirecting...");
        liff.login();
      } else {
        const profile = await liff.getProfile();
        playerName = profile.displayName;
        document.getElementById("display-name").innerText = playerName;
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("start").classList.remove("hidden");
        console.log("LIFF Ready!");
      }
    } catch (err) {
      console.error("LIFF Init Error:", err);
      alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏∞‡∏ö‡∏ö LINE: " + err.message);
    }
  }

  window.onload = initializeLiff;

  function startGame() {
    current = 0; score = 0; userResponses = [];
    document.getElementById("start").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    showQuestion();
  }

  function showQuestion() {
    const q = questions[current];
    document.getElementById("question").innerText = q.text;
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";
    document.getElementById("message").innerText = "";

    q.choices.forEach((choice, index) => {
      const btn = document.createElement("button");
      btn.className = "btn";
      btn.innerText = choice;
      btn.onclick = () => checkAnswer(index, btn);
      choicesDiv.appendChild(btn);
    });
  }

  function checkAnswer(index, btn) {
    const buttons = document.querySelectorAll("#choices .btn");
    buttons.forEach(b => b.disabled = true);

    const isCorrect = (index === questions[current].answer);
    userResponses.push(questions[current].choices[index]);

    if (isCorrect) {
      score++;
      btn.classList.add("correct");
      document.getElementById("message").innerText = "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! üå±";
    } else {
      btn.classList.add("wrong");
      document.getElementById("message").innerText = "‡∏ú‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: " + questions[current].choices[questions[current].answer];
    }
    setTimeout(nextQuestion, 1500);
  }

  function nextQuestion() {
    current++;
    if (current < questions.length) {
      showQuestion();
    } else {
      sendData();
      document.getElementById("game").classList.add("hidden");
      document.getElementById("finalScoreDisplay").innerText = "‡∏Ñ‡∏∏‡∏ì " + playerName + " ‡πÑ‡∏î‡πâ " + score + "/" + questions.length;
      document.getElementById("end").classList.remove("hidden");
    }
  }

  function sendData() {
    const data = { name: playerName, totalScore: score, details: userResponses };
    fetch(WEB_APP_URL, {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });
  }
</script>
</body>
</html>
